
<div style="width:75%;">
    <canvas id="canvas"></canvas>
</div>
<script>
    $(function () {
        loadBudgetInfo('2015-07-01', '2019-06-30', 6);
    });

    function loadBudgetInfo(from, to, stepInMonths, deptId) {
        $.ajax({
            url: '/api/budget/?from=' + from + '&to=' + to + '&stepInMonths=' + stepInMonths + '&deptId=' + deptId,
            type: "get",
            contentType: "application/json",
            dataType: "json",
            success: function (data, status, jqXHR) {
                plotBudget(data);
            },
            error: function (jqXHR, status, err) {
                console.error(err);
            },
        });
    }

    function plotBudget(data) {
        var n = data.length;
        var budget = data.map(x => x.budget);
        var positionCount = data.map(x => x.positionCount);
        var xLabels = data.map(x => x.date.substr(0, 10));

        var lineChartData = {
            labels: xLabels,
            datasets: [{
                label: 'Budget',
                borderColor: window.chartColors.red,
                backgroundColor: window.chartColors.red,
                fill: false,
                steppedLine: true,
                data: budget,
                yAxisID: 'y-axis-1',
            }, {
                label: 'Active Position Count',
                borderColor: window.chartColors.blue,
                backgroundColor: window.chartColors.blue,
                fill: false,
                steppedLine: true,
                data: positionCount,
                yAxisID: 'y-axis-2'
            }]
        };


        var ctx = document.getElementById('canvas').getContext('2d');
        window.myLine = Chart.Line(ctx, {
            data: lineChartData,
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: 'Chart.js Line Chart - Multi Axis'
                },
                scales: {
                    yAxes: [{
                        type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                        display: true,
                        position: 'left',
                        id: 'y-axis-1',
                    }, {
                        type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                        display: true,
                        position: 'right',
                        id: 'y-axis-2',

                        // grid line settings
                        gridLines: {
                            drawOnChartArea: false, // only want the grid lines for one axis to show up
                        },
                    }],
                }
            }
        })
    }

    ////var lineChartData = {
    ////    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
    ////    datasets: [{
    ////        label: 'My First dataset',
    ////        borderColor: window.chartColors.red,
    ////        backgroundColor: window.chartColors.red,
    ////        fill: false,
    ////        steppedLine: true,
    ////        data: [
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor()
    ////        ],
    ////        yAxisID: 'y-axis-1',
    ////    }, {
    ////        label: 'My Second dataset',
    ////        borderColor: window.chartColors.blue,
    ////        backgroundColor: window.chartColors.blue,
    ////        fill: false,
    ////        steppedLine: true,
    ////        data: [
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor(),
    ////            randomScalingFactor()
    ////        ],
    ////        yAxisID: 'y-axis-2'
    ////    }]
    ////};

    ////window.onload = function () {
    ////    var ctx = document.getElementById('canvas').getContext('2d');
    ////    window.myLine = Chart.Line(ctx, {
    ////        data: lineChartData,
    ////        options: {
    ////            responsive: true,
    ////            hoverMode: 'index',
    ////            stacked: false,
    ////            title: {
    ////                display: true,
    ////                text: 'Chart.js Line Chart - Multi Axis'
    ////            },
    ////            scales: {
    ////                yAxes: [{
    ////                    type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
    ////                    display: true,
    ////                    position: 'left',
    ////                    id: 'y-axis-1',
    ////                }, {
    ////                    type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
    ////                    display: true,
    ////                    position: 'right',
    ////                    id: 'y-axis-2',

    ////                    // grid line settings
    ////                    gridLines: {
    ////                        drawOnChartArea: false, // only want the grid lines for one axis to show up
    ////                    },
    ////                }],
    ////            }
    ////        }
    ////    });
    ////};


</script>

